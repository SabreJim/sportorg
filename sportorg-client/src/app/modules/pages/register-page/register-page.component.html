<div class="page-wrapper">
  <h4>Sign up for a Fencing Program</h4>

  <div *ngIf="currentUser?.isAnonymous">
    <p class="warning-message">Please login with your Gmail or Facebook account to proceed.</p>
  </div>

  <mat-expansion-panel [expanded]="seasonExpanded">
    <mat-expansion-panel-header class="panel-header">
      <h1>Season</h1>
      <div class="description">{{currentSeason?.name}}</div>
    </mat-expansion-panel-header>
    <div class="select-box">
      <p class="prompt-text">
        Select the season you would like to sign up for:
      </p>
      <app-select-input
        [lookupType]="'seasons'"
        [selected]="currentRegistration.seasonId"
        (selectionObject)="selectSeason($event)"
      ></app-select-input>
    </div>

  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="programExpanded">
    <mat-expansion-panel-header class="panel-header">
      <h1>Program</h1>
      <div class="description">{{currentProgram?.name}}</div>
    </mat-expansion-panel-header>
    <div class="select-box">
      <p class="prompt-text">
        Select the Program you would like to sign up for:
      </p>
      <app-select-input
        [staticLookup]="allPrograms"
        [selected]="currentRegistration.programId"
        (selectionObject)="selectProgram($event)"
      ></app-select-input>
    </div>
    <p [innerHTML]="currentProgram?.description | safePipe: 'html'"></p>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="classExpanded">
    <mat-expansion-panel-header class="panel-header">
      <h1>Classes</h1>
      <div class="description">{{classDescription}}</div>
    </mat-expansion-panel-header>
    <div class="table-box">
      <p class="prompt-text">
        Select the Classes you would like to attend. For some programs, a discount can be applied if you are
        not attending all available classes. Suggested age ranges help us find the classes that best fit each student.
      </p>
      <app-table ngClass="select-table"
                 [tableColumns]="classColumns"
                 [gridData]="availableClasses"
                 [canSelect]="true"
                 [trackById]="'scheduleId'"
                 (selectedRows)="selectClasses($event)"
      ></app-table>
    </div>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="memberExpanded">
    <mat-expansion-panel-header class="panel-header">
      <h1>Members/Fencers</h1>
      <div class="description">{{currentMember?.name}}</div>
    </mat-expansion-panel-header>
    <div class="table-box">
      <p class="prompt-text">
        Select the existing member that you would like to sign up for a class. If the person you are looking for
        does not appear here, you can add a new member with the "add member" button.
      </p>
      <button mat-raised-button color="primary" class="action-button" (click)="openAddMember()">Add Member</button>
      <app-table ngClass="select-table"
                 [tableColumns]="memberColumns"
                 [gridData]="myMembers"
                 [canSelect]="true"
                 [trackById]="'memberId'"
                 (selectedRows)="selectMembers($event)"
      ></app-table>
    </div>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="true" [hideToggle]="true">
    <mat-expansion-panel-header class="panel-header">
      <h1>Summary</h1>
    </mat-expansion-panel-header>
    <div class="summary-boxy">
      <p class="prompt-text">
        PUT SUMMARY HERE
      </p>
      <button mat-raised-button color="primary" (click)="submitRegistration()">Register Now</button>

    </div>
  </mat-expansion-panel>
</div>
